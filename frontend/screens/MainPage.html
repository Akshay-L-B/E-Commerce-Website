<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <script src="../js/MainPage.js"></script>
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/MainPage.css" />
    <link rel="stylesheet" href="../css/output.css" />
    <title>Shopify</title>
  </head>
  <body>
    <nav>
      <button
        id="logout"
        style="
          margin-top: 10px;
          background-color: red;
          color: #ffffff;
          border: none;
          padding: 10px 20px;
          border-radius: 5px;
          cursor: pointer;
          float: right;
        "
      >
        Logout
      </button>

      <div class="nav__bar">
        <div class="nav__header">
          <div class="nav__menu__btn" id="menu-btn">
            <i class="ri-menu-line"></i>
          </div>
        </div>
        <ul class="nav__links" id="nav-links">
          <li><a href="#home">Home</a></li>
          <li>
            <a href="../screens/Products.html">Products </a>
          </li>
          <li>
            <a href="../screens/Carts.html">Carts </a>
          </li>
          <li>
            <a href="../screens/CartDetails.html">View cart </a>
          </li>
          <li>
            <a href="../screens/Orders.html">Orders </a>
          </li>
          <li><a href="#feature">Features</a></li>
          <li><a href="#about">About Us</a></li>
        </ul>
        <img
          src="https://yt3.ggpht.com/3aYA0Uan4b_m-f82_mLofOC1c6KtsTIWUF314OExY0blcJpYPoHm5lRk0szSbBiQPWhNteXuxQ=s900-c-k-c0x00ffffff-no-rj"
          class="user-pic"
          onclick="toggleMenu()"
        />
        <div class="sub-menu-wrap" id="subMenu">
          <div class="sub-menu">
            <div class="user-info">
              <h4 id="profileName">You</h4>
            </div>
            <hr />
          </div>
        </div>
      </div>
    </nav>

    <header class="header" id="home">
      <div class="section__container header__container">
        <h3 class="text-animation">
          Shop anything at one place : <br /><span></span>
        </h3>
      </div>
    </header>

    <section class="section__container feature__container" id="feature">
      <h2 class="section__header">Features</h2>
      <div class="feature__grid">
        <div class="feature__card">
          <span><i class="ri-file-list-line"></i></span>
          <h4>Multiple carts</h4>
          <p>
            Users can create multiple carts to organize their shopping lists and
            manage their purchases efficiently.
          </p>
        </div>
        <div class="feature__card">
          <span><i class="ri-bookmark-line"></i></span>
          <h4>Wide range of products</h4>
          <p>
            Users can choose from a wide range of products, including
            electronics, clothing, accessories, and more.
          </p>
        </div>
        <div class="feature__card">
          <span><i class="ri-t-box-line"></i></span>
          <h4>Friendly interface:</h4>
          <p>
            Clean design, focusing only on essential elements. Forms and input
            fields are straightforward.
          </p>
        </div>
      </div>
    </section>
    <div
      class="max-w-xs overflow-hidden bg-white rounded-lg shadow-lg dark:bg-gray-800"
    ></div>

    <footer class="footer" id="about">
      <div class="section__container footer__container">
        <div class="footer__col">
          <div class="logo footer__logo">
            <h4>About Us</h4>
          </div>
          <p class="section__description">
            We are a group of passionate developers who aim to provide a
            seamless shopping experience to our users.
          </p>
          <ul class="footer__socials">
            <li>
              <a href="https://www.instagram.com/ietnitk/" target="_blank"
                ><i class="ri-instagram-line"></i
              ></a>
            </li>
            <li>
              <a href="https://www.facebook.com/ietnitk/about/" target="_blank"
                ><i class="ri-facebook-fill"></i
              ></a>
            </li>
            <li>
              <a
                href="https://www.linkedin.com/company/ietnitk/"
                target="_blank"
                ><i class="ri-linkedin-fill"></i
              ></a>
            </li>
          </ul>
        </div>
        <div class="footer__col">
          <h4>Services</h4>
          <div class="footer__links">
            <li><a href="#">Feedback</a></li>
            <li><a href="#">Customization</a></li>
            <li><a href="#">Complaints</a></li>
          </div>
        </div>
        <div class="footer__col">
          <h4>Contact Us</h4>
          <div class="footer__links">
            <li>
              <span><i class="ri-map-pin-2-fill"></i></span>
              <div>
                <h5>Location</h5>
                <p>NITK, Surathkal</p>
              </div>
            </li>
          </div>
        </div>
      </div>
      <div class="footer__bar">
        Copyright Â© 2023 Web Design Mastery. All rights reserved.
      </div>
    </footer>

    <script src="https://unpkg.com/scrollreveal"></script>

    <script>
      let subMenu = document.getElementById("subMenu");

      function toggleMenu() {
        subMenu.classList.toggle("open-menu");
      }
    </script>

    <script>
      function fetchData() {
        fetch("http://localhost:3000/routes/profile/name", {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => {
            if (response.ok) {
              return response.json();
            } else {
              throw new Error("Failed to fetch name");
            }
          })
          .then((data) => {
            const userName = data.name;
            document.getElementById("profileName").innerText = userName;
          })
          .catch((error) => {
            console.error("Error fetching name:", error);
          });

        fetch("http://localhost:3000/routes/fetch/countSwapRequests", {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => {
            if (response.ok) {
              return response.json();
            } else {
              throw new Error("Failed to fetch swap requests count");
            }
          })
          .then((data) => {
            const number = data.count;
            document.getElementById("numberReq").innerText = number;
          })
          .catch((error) => {
            console.error("Error fetching swap requests count:", error);
          });
      }

      fetchData();

      const logoutButton = document.getElementById("logout");

      logoutButton.addEventListener("click", async () => {
        try {
          const response = await fetch(
            "http://localhost:3000/routes/authorization/logout",
            {
              method: "GET",
            }
          );

          if (response.ok) {
            window.location.href = "SignUpPage.html";
          } else {
            alert("Logout failed. Please try again.");
          }
        } catch (error) {
          console.error("Logout error:", error);
          alert("An error occurred during logout. Please try again later.");
        }
      });
    </script>
  </body>
</html>
